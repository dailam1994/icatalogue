import{j as e,B as i,A as V,a as o,T as G,b as _,l as z,c as u,d as h,u as M,F as w,L as y,C as q,e as Q,f as H,g as J,h as W,i as C,r as K,k as X,m as Y,n as P,o as T,p as b,q as L,I as $,s as d,t as Z,v as B,R as ee,w as v}from"./main.bd0fa817.js";function S(){return e(i,{sx:{flexGrow:1},children:e(V,{position:"static",className:"nav-bar",children:o(G,{children:[e(_,{alt:"Logo",src:z,sx:{width:56,height:56}}),e(u,{variant:"h6",component:"div",sx:{flexGrow:1},children:"ICatalogue"}),e(h,{onClick:async()=>{await fetch("/api/admin/logout",{method:"POST",credentials:"include"}).then(r=>{r.status===200?(console.log("Logged out successfully!"),window.location.href="https://catalogue19940827.herokuapp.com/"):console.log("Error Logging out!")}).catch(r=>console.log(r))},color:"error",children:"Logout"})]})})})}function te(t){return t instanceof Error}const re=()=>{const{isLoading:t,error:r,data:s,isFetching:a}=M();return o(w,{children:[e(S,{}),e(u,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Manage Items"}),e(y,{style:{textDecoration:"none"},to:"add-item",children:e(h,{sx:{mx:1},children:"Add New Item"})}),e(i,{className:"guest-items",children:t||a?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:e(q,{color:"secondary"})})}):te(r)?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:o(u,{style:{color:"rgb(0,0,0)"},children:["Error ",r.message]})})}):s?s.map(n=>o(Q,{className:"card",sx:{maxWidth:345,m:1},style:{border:"1px solid rgb(247,195,102)",boxShadow:"3px 5px rgb(247,195,102)"},children:[e(H,{title:n.title,subheader:new Date(n.date).toLocaleDateString()}),e(J,{className:"card-media",component:"img",height:"194",src:n.url,alt:n.title}),e(W,{id:"item-description",children:e(u,{variant:"body2",color:"text.secondary",children:n.description})}),o(i,{sx:{m:1},children:[o(u,{variant:"caption",children:["Qty: ",n.quantity]}),o(u,{children:["Price: $",n.price]})]}),o(i,{sx:{display:"flex",justifyContent:"flex-end",pr:"5px",my:0,py:0,m:1},children:[e(y,{to:`/update-item/${n.itemID}`,style:{textDecoration:"none"},children:e(h,{size:"small",variant:"contained",color:"warning",style:{textTransform:"none"},children:"Update"})}),e(y,{style:{marginLeft:"3px",marginRight:"0",float:"right",textDecoration:"none"},to:`/delete-item/${n.itemID}`,children:e(h,{size:"small",variant:"contained",color:"error",style:{textTransform:"none"},children:"Delete"})})]})]},n.itemID)):null}),e(C,{})]})};var R={},ne=X.exports;Object.defineProperty(R,"__esModule",{value:!0});var I=R.default=void 0,ae=ne(K()),ie=Y,oe=(0,ae.default)((0,ie.jsx)("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"}),"KeyboardReturn");I=R.default=oe;const se=async t=>{await fetch("/api/item",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then(r=>{switch(r.status){case 200:return r.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(r=>{if(r)return r}).catch(r=>{console.log(r)})},le=()=>{const t=P();return T(["item-add"],se,{onSuccess:()=>{t("/")}})},ce=()=>{const[t,r]=b.exports.useState(""),{register:s,handleSubmit:a}=L(),{mutate:n}=le(),g=p=>{if(p.target.files!==null){const c=p.target.files[0];l(c)}},x=p=>{const{title:c,description:E,quantity:D,price:j}=p;n({url:t,title:c,description:E,quantity:D,price:j})},l=p=>{const c=new FileReader;c.readAsDataURL(p),c.onloadend=()=>{c.result!==null&&r(c.result.toString())}};return o(w,{children:[e(S,{}),e(u,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Add Item"}),e(i,{sx:{display:"flex",justifyContent:"center"},children:t&&e("img",{id:"upload-image",src:t,alt:"Image Preview"})}),o("form",{onSubmit:a(x),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(247,195,102)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e($,{id:"url",type:"file",sx:{m:"10px"},placeholder:"Image",onChange:g}),e(d,{id:"title",sx:{m:"10px"},variant:"outlined",label:"Title",...s("title",{required:!0})}),e(d,{id:"description",sx:{m:"10px"},variant:"outlined",label:"Description",multiline:!0,rows:4,...s("description",{required:!1})}),e(d,{id:"quantity",sx:{m:"10px"},variant:"outlined",label:"Quantity",...s("quantity",{required:!0})}),e(d,{id:"price",sx:{m:"10px"},variant:"outlined",label:"Price",...s("price",{required:!0})}),e(i,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(h,{type:"submit",variant:"contained",color:"success",sx:{width:"50%"},style:{textTransform:"none"},children:"Create"})})]}),e(y,{style:{textDecoration:"none"},to:"/",children:o(h,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(I,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})}),e(C,{})]})},de=async({queryKey:t})=>{const r=t[1];if(console.log(t),r)return await fetch(`/api/item/${r}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(a=>{switch(a.status){case 200:return a.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 404:throw new Error("404 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(a=>{if(a)return a}).catch(a=>{console.log(a)})},N=t=>Z(["item-single",t],de,{refetchOnWindowFocus:!1}),ue=async t=>{const r=t[1],s={title:t[0],id:t[1]};return await fetch(`/api/item/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"}).then(n=>{switch(n.status){case 200:return;case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).catch(n=>{console.log(n)})},pe=()=>{const t=P();return T(["delete-item"],ue,{onSuccess:()=>{t("/")}})};function he(t){return t instanceof Error}const me=()=>{const{id:t}=B();let r=[];const{isLoading:s,error:a,data:n,isFetching:g}=N(t);b.exports.useEffect(()=>{n&&r.push(n.title)},[n]);const{handleSubmit:x}=L(),{mutate:l}=pe(),p=()=>{t&&r.push(t),l(r)};return o(w,{children:[e(S,{}),e(u,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Delete Item"}),e(i,{children:s||g?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:e(q,{color:"primary"})})}):he(a)?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:o(u,{style:{color:"rgb(0,0,0)"},children:["Error ",a.message]})})}):n?o("form",{onSubmit:x(p),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(247,195,102)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(i,{sx:{display:"flex",justifyContent:"center"},children:e("img",{id:"upload-image",src:n.url,alt:"Image Preview"})}),e(d,{id:"title",sx:{m:"10px"},variant:"outlined",label:"Title",defaultValue:n.title,InputProps:{readOnly:!0}}),e(d,{id:"description",sx:{m:"10px"},variant:"outlined",label:"Description",defaultValue:n.description,multiline:!0,InputProps:{readOnly:!0},rows:4}),e(d,{id:"quantity",sx:{m:"10px"},variant:"outlined",label:"Quantity",defaultValue:n.quantity,InputProps:{readOnly:!0}}),e(d,{id:"price",sx:{m:"10px"},variant:"outlined",label:"Price",defaultValue:n.price,InputProps:{readOnly:!0}}),e(i,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(h,{variant:"contained",color:"error",type:"submit",sx:{width:"50%"},style:{textTransform:"none"},children:"Delete"})})]}):null}),e(y,{style:{textDecoration:"none"},to:"/",children:o(h,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(I,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})}),e(C,{})]})},xe=async t=>{const r=t.id;return await fetch(`/api/item/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then(a=>{switch(a.status){case 200:return a.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 404:throw new Error("404 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(a=>{if(a)return a}).catch(a=>{console.log(a)})},fe=()=>{const t=P();return T(["update-item"],xe,{onSuccess:()=>{t("/")}})};function ye(t){return t instanceof Error}const ge=()=>{const{id:t}=B(),[r,s]=b.exports.useState("");let a,n;const{isLoading:g,error:x,data:l,isFetching:p}=N(t);b.exports.useEffect(()=>{l&&(a=l.url)},[l]);const{register:c,handleSubmit:E}=L(),{mutate:D}=fe(),j=f=>{if(f.target.files!==null){const m=f.target.files[0];U(m)}},F=f=>{const{title:m,description:A,quantity:O,price:k}=f;r.startsWith("data")?n={id:t,url:r,title:m,description:A,quantity:O,price:k}:n={id:t,url:a,title:m,description:A,quantity:O,price:k},D(n)},U=f=>{const m=new FileReader;m.readAsDataURL(f),m.onloadend=()=>{m.result!==null&&s(m.result.toString())}};return o(w,{children:[e(S,{}),e(u,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Update Item"}),e(i,{sx:{display:"flex",justifyContent:"center"},children:r&&e("img",{id:"upload-image",src:r,alt:"Image Preview"})}),e(i,{children:g||p?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:e(q,{color:"primary"})})}):ye(x)?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:o(u,{style:{color:"rgb(0,0,0)"},children:["Error ",x.message]})})}):l?o("form",{onSubmit:E(F),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(247,195,102)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(i,{sx:{display:"flex",justifyContent:"center"},children:e("img",{id:"upload-image",src:l.url,alt:"Image Preview"})}),e($,{id:"url",type:"file",sx:{m:"10px"},placeholder:"Image",onChange:j}),e(d,{id:"title",sx:{m:"10px"},variant:"outlined",label:"Title",defaultValue:l.title,InputProps:{readOnly:!0},...c("title",{required:!0})}),e(d,{id:"description",sx:{m:"10px"},variant:"outlined",label:"Description",defaultValue:l.description,multiline:!0,rows:4,...c("description",{required:!1})}),e(d,{id:"quantity",sx:{m:"10px"},variant:"outlined",label:"Quantity",defaultValue:l.quantity,...c("quantity",{required:!0})}),e(d,{id:"price",sx:{m:"10px"},variant:"outlined",label:"Price",defaultValue:l.price,...c("price",{required:!0})}),e(i,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(h,{variant:"contained",color:"warning",type:"submit",sx:{width:"50%"},style:{textTransform:"none"},children:"Update"})})]}):null}),e(y,{style:{textDecoration:"none"},to:"/",children:o(h,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(I,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})}),e(C,{})]})},ve=()=>e(w,{children:o(ee,{children:[e(v,{path:"/delete-item/:id",element:e(me,{})}),e(v,{path:"/update-item/:id",element:e(ge,{})}),e(v,{path:"/add-item",element:e(ce,{})}),e(v,{path:"/",element:e(re,{})})]})});export{ve as default};
