import{j as e,B as i,A as G,a as o,T as _,b as z,l as M,c as p,d as h,u as Q,F as w,L as f,C as P,e as H,f as J,g as W,h as K,i as C,r as X,k as Y,m as Z,n as T,o as L,p as S,q as R,I as B,s as u,t as ee,v as N,R as te,w as b}from"./main.b4287efc.js";function I(){return e(i,{sx:{flexGrow:1},children:e(G,{position:"static",className:"nav-bar",children:o(_,{children:[e(z,{alt:"Logo",src:M,sx:{width:56,height:56}}),e(p,{variant:"h6",component:"div",sx:{flexGrow:1},children:"ICatalogue"}),e(h,{onClick:async()=>{await fetch("/api/admin/logout",{method:"POST",credentials:"include"}).then(r=>{r.status===200?(console.log("Logged out successfully!"),window.location.href="https://catalogue19940827.herokuapp.com/"):console.log("Error Logging out!")}).catch(r=>console.log(r))},color:"error",children:"Logout"})]})})})}function re(t){return t instanceof Error}const ne=()=>{const{isLoading:t,error:r,data:s,isFetching:a}=Q();return o(w,{children:[e(I,{}),e(p,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Manage Items"}),e(f,{style:{textDecoration:"none"},to:"add-item",children:e(h,{sx:{mx:1},children:"Add New Item"})}),e(i,{className:"guest-items",children:t||a?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:e(P,{color:"secondary"})})}):re(r)?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:o(p,{style:{color:"rgb(0,0,0)"},children:["Error ",r.message]})})}):s?s.map(n=>o(H,{className:"card",sx:{maxWidth:345,m:1},style:{border:"1px solid rgb(247,195,102)",boxShadow:"3px 5px rgb(247,195,102)"},children:[e(J,{title:n.title,subheader:new Date(n.date).toLocaleDateString()}),e(W,{className:"card-media",component:"img",height:"194",src:n.url,alt:n.title}),e(K,{id:"item-description",children:e(p,{variant:"body2",color:"text.secondary",children:n.description})}),o(i,{sx:{m:1},children:[o(p,{variant:"caption",children:["Qty: ",n.quantity]}),o(p,{children:["Price: $",n.price]})]}),o(i,{sx:{display:"flex",justifyContent:"flex-end",pr:"5px",my:0,py:0,m:1},children:[e(f,{to:`/update-item/${n.itemID}`,style:{textDecoration:"none"},children:e(h,{size:"small",variant:"contained",color:"warning",style:{textTransform:"none"},children:"Update"})}),e(f,{style:{marginLeft:"3px",marginRight:"0",float:"right",textDecoration:"none"},to:`/delete-item/${n.itemID}`,children:e(h,{size:"small",variant:"contained",color:"error",style:{textTransform:"none"},children:"Delete"})})]})]},n.itemID)):null}),e(C,{})]})};var F={},ae=Y.exports;Object.defineProperty(F,"__esModule",{value:!0});var E=F.default=void 0,ie=ae(X()),oe=Z,se=(0,ie.default)((0,oe.jsx)("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"}),"KeyboardReturn");E=F.default=se;const le=async t=>{console.log(t),await fetch("/api/item",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then(r=>{switch(r.status){case 200:return r.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(r=>{if(r)return r}).catch(r=>{console.log(r)})},ce=()=>{const t=T();return L(["item-add"],le,{onSuccess:()=>{t("/")}})},de=()=>{const[t,r]=S.exports.useState(""),{register:s,handleSubmit:a,formState:{errors:n}}=R(),{mutate:y}=ce(),g=c=>{if(c.target.files!==null){const d=c.target.files[0];v(d)}},l=c=>{const{title:d,description:D,quantity:j,price:q}=c;y({url:t,title:d,description:D,quantity:j,price:q})},v=c=>{const d=new FileReader;d.readAsDataURL(c),d.onloadend=()=>{d.result!==null&&r(d.result.toString())}};return o(w,{children:[e(I,{}),e(p,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Add Item"}),e(i,{sx:{display:"flex",justifyContent:"center"},children:t&&e("img",{id:"upload-image",src:t,alt:"Image Preview"})}),o("form",{onSubmit:a(l),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(247,195,102)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(B,{id:"url",type:"file",sx:{m:"10px"},placeholder:"Image",onChange:g}),e(u,{id:"title",sx:{m:"10px"},variant:"outlined",label:"Title",...s("title",{required:!0})}),e(u,{id:"description",sx:{m:"10px"},variant:"outlined",label:"Description",multiline:!0,rows:4,...s("description",{required:!1})}),e(u,{id:"quantity",sx:{m:"10px"},variant:"outlined",label:"Quantity",...s("quantity",{required:!0})}),e(u,{id:"price",sx:{m:"10px"},variant:"outlined",label:"Price",...s("price",{required:!0})}),e(i,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(h,{type:"submit",variant:"contained",color:"success",sx:{width:"50%"},style:{textTransform:"none"},children:"Create"})})]}),e(f,{style:{textDecoration:"none"},to:"/",children:o(h,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(E,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})}),e(C,{})]})},ue=async({queryKey:t})=>{const r=t[1];if(r)return await fetch(`/api/item/${r}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(a=>{switch(a.status){case 200:return a.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 404:throw new Error("404 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(a=>{if(a)return a}).catch(a=>{console.log(a)})},U=t=>ee(["item-single",t],ue,{refetchOnWindowFocus:!1}),pe=async t=>{const r=t[1],s={title:t[0],id:t[1]};return await fetch(`/api/item/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"}).then(n=>{switch(n.status){case 200:return;case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).catch(n=>{console.log(n)})},he=()=>{const t=T();return L(["delete-item"],pe,{onSuccess:()=>{t("/")}})};function me(t){return t instanceof Error}const xe=()=>{const{id:t}=N();let r=[];const{isLoading:s,error:a,data:n,isFetching:y}=U(t);S.exports.useEffect(()=>{n&&r.push(n.title)},[n]);const{register:g,handleSubmit:l,formState:{errors:v}}=R(),{mutate:c}=he(),d=D=>{r.push(t),c(r)};return o(w,{children:[e(I,{}),e(p,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Delete Item"}),e(i,{children:s||y?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:e(P,{color:"primary"})})}):me(a)?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:o(p,{style:{color:"rgb(0,0,0)"},children:["Error ",a.message]})})}):n?o("form",{onSubmit:l(d),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(247,195,102)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(i,{sx:{display:"flex",justifyContent:"center"},children:e("img",{id:"upload-image",src:n.url,alt:"Image Preview"})}),e(u,{id:"title",sx:{m:"10px"},variant:"outlined",label:"Title",defaultValue:n.title,InputProps:{readOnly:!0}}),e(u,{id:"description",sx:{m:"10px"},variant:"outlined",label:"Description",defaultValue:n.description,multiline:!0,InputProps:{readOnly:!0},rows:4}),e(u,{id:"quantity",sx:{m:"10px"},variant:"outlined",label:"Quantity",defaultValue:n.quantity,InputProps:{readOnly:!0}}),e(u,{id:"price",sx:{m:"10px"},variant:"outlined",label:"Price",defaultValue:n.price,InputProps:{readOnly:!0}}),e(i,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(h,{variant:"contained",color:"error",type:"submit",sx:{width:"50%"},style:{textTransform:"none"},children:"Delete"})})]}):null}),e(f,{style:{textDecoration:"none"},to:"/",children:o(h,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(E,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})}),e(C,{})]})},fe=async t=>{const r=t.id;return console.log(t),await fetch(`/api/item/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then(a=>{switch(a.status){case 200:return a.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 404:throw new Error("404 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(a=>{if(a)return a}).catch(a=>{console.log(a)})},ye=()=>{const t=T();return L(["update-item"],fe,{onSuccess:()=>{t("/")}})};function ge(t){return t instanceof Error}const we=()=>{const{id:t}=N(),[r,s]=S.exports.useState("");let a,n;const{isLoading:y,error:g,data:l,isFetching:v}=U(t);S.exports.useEffect(()=>{l&&(a=l.url)},[l]);const{register:c,handleSubmit:d,formState:{errors:D}}=R(),{mutate:j}=ye(),q=x=>{if(x.target.files!==null){const m=x.target.files[0];V(m)}},A=x=>{const{title:m,description:O,quantity:k,price:$}=x;r.startsWith("data")?n={id:t,url:r,title:m,description:O,quantity:k,price:$}:n={id:t,url:a,title:m,description:O,quantity:k,price:$},j(n)},V=x=>{const m=new FileReader;m.readAsDataURL(x),m.onloadend=()=>{m.result!==null&&s(m.result.toString())}};return o(w,{children:[e(I,{}),e(p,{variant:"h5",component:"div",sx:{flexGrow:1,margin:2},children:"Update Item"}),e(i,{sx:{display:"flex",justifyContent:"center"},children:r&&e("img",{id:"upload-image",src:r,alt:"Image Preview"})}),e(i,{children:y||v?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:e(P,{color:"primary"})})}):ge(g)?e(i,{sx:{display:"flex",justifyContent:"center"},children:e(i,{children:o(p,{style:{color:"rgb(0,0,0)"},children:["Error ",g.message]})})}):l?o("form",{onSubmit:d(A),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(247,195,102)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(i,{sx:{display:"flex",justifyContent:"center"},children:e("img",{id:"upload-image",src:l.url,alt:"Image Preview"})}),e(B,{id:"url",type:"file",sx:{m:"10px"},placeholder:"Image",onChange:q}),e(u,{id:"title",sx:{m:"10px"},variant:"outlined",label:"Title",defaultValue:l.title,InputProps:{readOnly:!0},...c("title",{required:!0})}),e(u,{id:"description",sx:{m:"10px"},variant:"outlined",label:"Description",defaultValue:l.description,multiline:!0,rows:4,...c("description",{required:!1})}),e(u,{id:"quantity",sx:{m:"10px"},variant:"outlined",label:"Quantity",defaultValue:l.quantity,...c("quantity",{required:!0})}),e(u,{id:"price",sx:{m:"10px"},variant:"outlined",label:"Price",defaultValue:l.price,...c("price",{required:!0})}),e(i,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(h,{variant:"contained",color:"warning",type:"submit",sx:{width:"50%"},style:{textTransform:"none"},children:"Update"})})]}):null}),e(f,{style:{textDecoration:"none"},to:"/",children:o(h,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(E,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})}),e(C,{})]})},be=()=>e(w,{children:o(te,{children:[e(b,{path:"/delete-item/:id",element:e(xe,{})}),e(b,{path:"/update-item/:id",element:e(we,{})}),e(b,{path:"/add-item",element:e(de,{})}),e(b,{path:"/",element:e(ne,{})})]})});export{be as default};
